<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Untitled-1.css">
</head>
<body>



    <div class="wrap">
        <h1>Галерея 1 - слайдер</h1>
        <div class="gallery" data-setting="setup1">
            <div class="slider">
                <div class="stage">
                    <div>
                        <img src="icons/auto_01.jpeg" alt="">
                    </div>
                    <div>
                        <img src="icons/auto_02.jpeg" alt="">
                    </div>
                    <div>
                        <img src="icons/auto_03.jpeg" alt="">
                    </div>
                    <div>
                        <img src="icons/auto_04.jpeg" alt="">
                    </div>
                    <div>
                        <img src="icons/auto_05.jpeg" alt="">
                    </div>
                    <div>
                        <img src="icons/auto_06.jpeg" alt="">
                    </div>
                </div>
            </div>
            <div class="control">
                <div class="nav-ctrl" data-hidden="true">
                    <span class="prev" data-shift="prev">prev</span>
                    <span class="next" data-shift="next">next</span>
                </div>
                <ul class="dots-ctrl" data-hidden="true"></ul>
            </div>
        </div>
    </div>
    
    <script>
        (function() {
            'use strict';
 
            class Gallery {
                // настройки по-умолчанию
                static defaults = {
                    margin:			10,		// расстояние между элементами [px]
                    visibleItems: 	1,		// сколько элементов показывать одновременно
                    border:			0,		// толщина рамки изображения прописанная в CSS [px]
                    responsive:		true,	// адаптивная галерея
                    autoScroll:		false,	// автоматическое прокручивание
                    interval: 		3000,	// задержка при автоматическом прокручивании [ms]
                    nav:			true,	// показать/скрыть кнопки next/prev
                    dots:			false,	// показать/скрыть постраничную навигацию
                    keyControl: 	false,	// управление клавишами вправо / влево
                    animated:		false,	// включение анимации
                    baseTransition:	0.4,	// скорость анимации, при изменении CSS свойств
                    delayTimer:		250,	// время задержки при resize страницы [ms]
                    limit:			30		// ограничиваем перемещение крайних элементов [px]
                };

                static LEFT = 37;	// код клавиши 'стрелочка влево' 
                static RIGHT = 39;	// код клавиши 'стрелочка вправо'
        
                constructor(gallery, setup) {
                    
                    this.gallery = gallery;
                    this.setup = setup;
            
                    // контейнер в котором отображаются элементы галереи
                    this.slider = this.gallery.querySelector('.slider');

                    // контейнер, непосредственно в котором расположены элементы слайдера
                    this.stage = this.gallery.querySelector('.stage');

                    // элементы слайдера
                    this.items = this.gallery.querySelectorAll('.stage > div');

                    // количество элементов в слайдере
                    this.count = this.items.length;        
                    this.current = 0;		// index координаты текущего элемента
                    this.next = 0;			// index координаты следующего элемента
                    this.pressed = false;	// указывает, что совершилось событие 'mousedown'
                    this.start = 0;			// координата, с которой начато перетаскивание
                    this.shift = 0;			// на сколько был перемещён курсор относительно start
            
                    // построение галереи исходя из полученных настроек
                    this.init();
                }

        
                // объединяет и перезаписывает значения двух объектов
                // и выдаёт общий результат
                static extend(out) {

                    out = out || {};

                    for (let i = 1; i < arguments.length; i++) {

                        if (!arguments[i]) continue;

                        for (let key in arguments[i]) {

                            if (arguments[i].hasOwnProperty(key)) out[key] = arguments[i][key];
                        }
                    }

                    return out;
                };
        
                // возвращает координату Х текущего положения
                // курсора или пальца
                static xpos(e) {
                    // touch event
                    // проверяем, сформирован ли список точек на текущем элементе
                    // (список пальцев, которые вступили в контакт)
                    if (e.targetTouches && (e.targetTouches.length >= 1)) {
                        // положение первой точки прикосновения, относительно левого края браузера
                        return e.targetTouches[0].clientX;
                    }
                    // mouse event
                    return e.clientX;
                }
            }
        
            // выбираем все галереи на странице
            const galleries = document.querySelectorAll('.gallery');
            // перебираем полученную коллекцию элементов
            for (let gallery of galleries) {
                // вариант настроек для данной галереи
                const setup = gallery.dataset.setting;
                // создаём экземпляр галереи
                const slider = new Gallery(gallery, setting[setup]);
                
        }
        )();

                init() {
            // объединяем дефолтные настройки с настройками галереи
            this.options = Gallery.extend({}, Gallery.defaults, this.setup);
            // формируем каркас галереи
            this.setSizeCarousel();
            // заполняем массив с координатами X каждого элемента слайдера
            this.setCoordinates();
            // формируем управление слайдером в зависимости от настроек
            this.initControl();
            // устанавливаем обработчики событий, если ещё не устанавливались
            if (this.events) return;
            this.registerEventsHandler();
        }
    </script>
</body>
</html>